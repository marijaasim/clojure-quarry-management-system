{"version":3,"sources":["quarry_management/frontend/api.cljs"],"mappings":";AAEA,yCAAA,zCAAKA;AAEL,4CAAA,5CAAMC,gGAAYC;AAAlB,4EACUA,XAAKC,jEAAc,iEAAA,mEAAA,2EAAA,xMAACC;;AAE9B,4CAAA,5CAAMC,gGAAYC,IAAIC;AAAtB,OACU,AAACC,MAASF,IAAI,AAACG,qBAAQF,tCACvB,kDAAA,WAAAG;AAAA,AAAQ,oBAAI,AAAAA;AAAqB,OAAA,AAAAA,6BAAOT;;AACnB,MAAO,KAAAU,MAAW,IAAA,oDAAa,AAAAD;;;;AAE9D,4CAAA,5CAAME,gGAAYC;AAAlB,OACU,iJAAA,2CAAA,uDAAA,nPAACR,0CAAW,wFAAA,xCAAKL,1FACjB,uQAAOa,9QACP,8RAAA,WAAAC;AAAA,AAAS,qBAAA,yBAAAA,vCAACC;;;AAEpB,mDAAA,nDAAMC,8GAAmBC,GAAGJ;AAA5B,OACU,6MAAA,2CAAA,uDAAA,/SAACR,0CAAW,wFAAA,+DAAA,vGAAKL,mGAAuBiB,7LAExC,mUAAOJ,1UACP,0VAAA,WAAAK;AAAA,AAAS,qBAAA,gCAAAA,9CAACH;;;AAEpB,8CAAA,9CAAMI,oGAAcC,WAAWP;AAA/B,OACU,6IAAA,2CAAA,uDAAA,OAAA,2DAAA,kBAAA,qBAAA,xVAACR,0CAAW,wFAAA,xCAAKL,oTAGE,AAACqB,eAAkB,AAACZ,qBAAQW,lbAC/C,6cAAOP,pdACP,oeAAA,WAAAS;AAAA,AAAS,qBAAA,wBAAAA,tCAACP;;;AAEpB,8CAAA,9CAAMQ,oGAAcC,KAAKX;AAAzB,OACU,wJAAA,2CAAA,uDAAA,OAAA,2DAAA,kBAAA,qBAAA,nWAACR,0CAAW,wFAAA,xCAAKL,+TAGE,AAACqB,eAAkB,AAACZ,qBAAQe,7bAC/C,kdAAOX,zdACP,yeAAA,WAAAY;AAAA,AAAS,qBAAA,sBAAAA,pCAACV;;;AAEpB,8CAAA,9CAAMW,oGAAcT,GAAGU;AAAvB,OACU,oHAAA,YAAA,mBAAA,kBAAA,rKAACnB,MACC,wFAAA,xCAAKR,6IAGM,eAAA,fAAY4B,uBAAiBX,1NAC1C,wOAAO,WAAKY,1PAGZ;AAHO,AACI,oBAAM,AAAMA;AAAZ,AACM,QAACF,2CAAAA,6CAAAA;;AADP;;UAEH,WAAKG;AAAL,AACI,qBAAA,dAACf,8BAAiCe;;;AAExD,4CAAA,5CAAMC,gGAAYlB;AAAlB,OACU,6IAAA,2CAAA,uDAAA,/OAACR,0CAAW,wFAAA,xCAAKL,1FACjB,mQAAOa,1QACP,0RAAA,WAAAmB;AAAA,AAAS,qBAAA,yBAAAA,vCAACjB;;;AAEpB,iDAAA,jDAAMkB,0GAAiBC,OAAMC,SAASC,OAAOvB;AAA7C,OACU,sJAAA,2CAAA,uDAAA,OAAA,2DAAA,kBAAA,qBAAA,jWAACR,0CAAW,wFAAA,xCAAKL,6TAGE,AAACqB,eAAkB,qBAAA,2CAAA,+DAAA,sEAAA,rMAACZ,wHAAgByB,oEAAgBC,mEAAiBC,rqBACxF,osBAAOvB,3sBACP,2tBAAA,WAAAwB;AAAA,AAAS,qBAAA,2BAAAA,zCAACtB;;;AAEpB,2DAAA,3DAAMuB,8HAA2BC,KAAKC,GAAG3B;AAAzC,OACU,sJAAA,2CAAA,uDAAA,OAAA,2DAAA,kBAAA,qBAAA,jWAACR,0CAAW,wFAAA,xCAAKL,6TAGE,eAAA,fAACqB,yBACYkB,YACAC,5bAChC,gdAAO3B,vdACP,ueAAA,WAAA4B;AAAA,AAAS,qBAAA,6BAAAA,3CAAC1B","names":["quarry-management.frontend.api/api-url","quarry-management.frontend.api/parse-json","text","js/JSON.parse","cljs.core.js__GT_clj","quarry-management.frontend.api/fetch-json","url","opts","js/fetch","cljs.core/clj->js","p1__11936#","js/Error","quarry-management.frontend.api/get-blocks","callback","p1__11937#","js/console.error","quarry-management.frontend.api/get-block-details","id","p1__11938#","quarry-management.frontend.api/create-block","block-data","js/JSON.stringify","p1__11939#","quarry-management.frontend.api/update-block","data","p1__11940#","quarry-management.frontend.api/delete-block","on-success","js/JSON","res","err","quarry-management.frontend.api/get-prices","p1__11941#","quarry-management.frontend.api/calculate-price","class","category","weight","p1__11942#","quarry-management.frontend.api/calculate-revenue-from-to","from","to","p1__11943#"],"sourcesContent":["(ns quarry-management.frontend.api)\n\n(def api-url \"http://localhost:3000\")\n\n(defn parse-json [text]\n      (-> text js/JSON.parse (js->clj :keywordize-keys true)))\n\n(defn fetch-json [url opts]\n      (-> (js/fetch url (clj->js opts))\n          (.then #(if (.-ok %) (-> % .text (.then parse-json))\n                               (throw (js/Error. (str \"HTTP \" (.-status %))))))))\n\n(defn get-blocks [callback]\n      (-> (fetch-json (str api-url \"/api/blocks\") {:method \"GET\"})\n          (.then callback)\n          (.catch #(js/console.error \"Error fetching blocks:\" %))))\n\n(defn get-block-details [id callback]\n      (-> (fetch-json (str api-url \"/api/blocks/\" id \"/details\")\n                      {:method \"GET\"})\n          (.then callback)\n          (.catch #(js/console.error \"Error fetching block details:\" %))))\n\n(defn create-block [block-data callback]\n      (-> (fetch-json (str api-url \"/blocks\")\n                      {:method \"POST\"\n                       :headers #js {\"Content-Type\" \"application/json\"}\n                       :body (js/JSON.stringify (clj->js block-data))})\n          (.then callback)\n          (.catch #(js/console.error \"Error creating block:\" %))))\n\n(defn update-block [data callback]\n      (-> (fetch-json (str api-url \"/api/blocks/update\")\n                      {:method \"POST\"\n                       :headers #js {\"Content-Type\" \"application/json\"}\n                       :body (js/JSON.stringify (clj->js data))})\n          (.then callback)\n          (.catch #(js/console.error \"Update block error:\" %))))\n\n(defn delete-block [id on-success]\n      (-> (js/fetch\n            (str api-url \"/api/blocks/delete\")\n            #js {:method \"POST\"\n                 :headers #js {\"Content-Type\" \"application/json\"}\n                 :body (.stringify js/JSON #js {:id id})})\n          (.then (fn [res]\n                     (when (.-ok res)\n                           (on-success))))\n          (.catch (fn [err]\n                      (js/console.error \"Delete error:\" err)))))\n\n(defn get-prices [callback]\n      (-> (fetch-json (str api-url \"/prices\") {:method \"GET\"})\n          (.then callback)\n          (.catch #(js/console.error \"Error fetching prices:\" %))))\n\n(defn calculate-price [class category weight callback]\n      (-> (fetch-json (str api-url \"/calculate-price\")\n                      {:method \"POST\"\n                       :headers #js {\"Content-Type\" \"application/json\"}\n                       :body (js/JSON.stringify (clj->js {:class class :category category :weight weight}))})\n          (.then callback)\n          (.catch #(js/console.error \"Error calculating price:\" %))))\n\n(defn calculate-revenue-from-to [from to callback]\n      (-> (fetch-json (str api-url \"/revenue-from-to\")\n                      {:method \"POST\"\n                       :headers #js {\"Content-Type\" \"application/json\"}\n                       :body (js/JSON.stringify\n                               #js {:from from\n                                    :to   to})})\n          (.then callback)\n          (.catch #(js/console.error \"Error calculating revenue:\" %))))"]}