{"version":3,"sources":["quarry_management/frontend/api.cljs"],"mappings":";AAEA,yCAAA,zCAAKA;AAEL,4CAAA,5CAAMC,gGAAYC;AAAlB,4EACUA,XAAKC,jEAAc,iEAAA,mEAAA,2EAAA,xMAACC;;AAE9B,4CAAA,5CAAMC,gGAAYC,IAAIC;AAAtB,OACU,AAACC,MAASF,IAAI,AAACG,qBAAQF,tCACvB,kDAAA,WAAAG;AAAA,AAAQ,oBAAI,AAAAA;AAAqB,OAAA,AAAAA,6BAAOT;;AACnB,MAAO,KAAAU,MAAW,IAAA,oDAAa,AAAAD;;;;AAE9D,4CAAA,5CAAME,gGAAYC;AAAlB,OACU,6IAAA,2CAAA,uDAAA,/OAACR,0CAAW,wFAAA,xCAAKL,1FACjB,mQAAOa,1QACP,0RAAA,WAAAC;AAAA,AAAS,qBAAA,yBAAAA,vCAACC;;;AAEpB,8CAAA,9CAAMC,oGAAcC,WAAWJ;AAA/B,OACU,6IAAA,2CAAA,uDAAA,OAAA,2DAAA,kBAAA,qBAAA,xVAACR,0CAAW,wFAAA,xCAAKL,oTAGE,AAACkB,eAAkB,AAACT,qBAAQQ,lbAC/C,6cAAOJ,pdACP,oeAAA,WAAAM;AAAA,AAAS,qBAAA,wBAAAA,tCAACJ;;;AAEpB,8CAAA,9CAAMK,oGAAcC,GAAGJ,WAAWJ;AAAlC,OACU,8LAAA,2CAAA,uDAAA,MAAA,2DAAA,kBAAA,qBAAA,xYAACR,0CAAW,wFAAA,xCAAKL,+FAAmBqB,qQAGjB,AAACH,eAAkB,AAACT,qBAAQQ,leAC/C,6fAAOJ,pgBACP,ohBAAA,WAAAS;AAAA,AAAS,qBAAA,wBAAAA,tCAACP;;;AAEpB,4CAAA,5CAAMQ,gGAAYV;AAAlB,OACU,6IAAA,2CAAA,uDAAA,/OAACR,0CAAW,wFAAA,xCAAKL,1FACjB,mQAAOa,1QACP,0RAAA,WAAAW;AAAA,AAAS,qBAAA,yBAAAA,vCAACT;;;AAEpB,iDAAA,jDAAMU,0GAAiBC,OAAMC,SAASC,OAAOf;AAA7C,OACU,sJAAA,2CAAA,uDAAA,OAAA,2DAAA,kBAAA,qBAAA,jWAACR,0CAAW,wFAAA,xCAAKL,6TAGE,AAACkB,eAAkB,qBAAA,2CAAA,+DAAA,sEAAA,rMAACT,wHAAgBiB,oEAAgBC,mEAAiBC,rqBACxF,osBAAOf,3sBACP,2tBAAA,WAAAgB;AAAA,AAAS,qBAAA,2BAAAA,zCAACd;;;AAEpB,2DAAA,3DAAMe,8HAA2BC,KAAKC,GAAGnB;AAAzC,OACU,sJAAA,2CAAA,uDAAA,OAAA,2DAAA,kBAAA,qBAAA,jWAACR,0CAAW,wFAAA,xCAAKL,6TAGE,eAAA,fAACkB,yBACYa,YACAC,5bAChC,gdAAOnB,vdACP,ueAAA,WAAAoB;AAAA,AAAS,qBAAA,6BAAAA,3CAAClB","names":["quarry-management.frontend.api/api-url","quarry-management.frontend.api/parse-json","text","js/JSON.parse","cljs.core.js__GT_clj","quarry-management.frontend.api/fetch-json","url","opts","js/fetch","cljs.core/clj->js","p1__12063#","js/Error","quarry-management.frontend.api/get-blocks","callback","p1__12064#","js/console.error","quarry-management.frontend.api/create-block","block-data","js/JSON.stringify","p1__12065#","quarry-management.frontend.api/update-block","id","p1__12066#","quarry-management.frontend.api/get-prices","p1__12067#","quarry-management.frontend.api/calculate-price","class","category","weight","p1__12068#","quarry-management.frontend.api/calculate-revenue-from-to","from","to","p1__12069#"],"sourcesContent":["(ns quarry-management.frontend.api)\n\n(def api-url \"http://localhost:3000\")\n\n(defn parse-json [text]\n      (-> text js/JSON.parse (js->clj :keywordize-keys true)))\n\n(defn fetch-json [url opts]\n      (-> (js/fetch url (clj->js opts))\n          (.then #(if (.-ok %) (-> % .text (.then parse-json))\n                               (throw (js/Error. (str \"HTTP \" (.-status %))))))))\n\n(defn get-blocks [callback]\n      (-> (fetch-json (str api-url \"/blocks\") {:method \"GET\"})\n          (.then callback)\n          (.catch #(js/console.error \"Error fetching blocks:\" %))))\n\n(defn create-block [block-data callback]\n      (-> (fetch-json (str api-url \"/blocks\")\n                      {:method \"POST\"\n                       :headers #js {\"Content-Type\" \"application/json\"}\n                       :body (js/JSON.stringify (clj->js block-data))})\n          (.then callback)\n          (.catch #(js/console.error \"Error creating block:\" %))))\n\n(defn update-block [id block-data callback]\n      (-> (fetch-json (str api-url \"/blocks/\" id)\n                      {:method \"PUT\"\n                       :headers #js {\"Content-Type\" \"application/json\"}\n                       :body (js/JSON.stringify (clj->js block-data))})\n          (.then callback)\n          (.catch #(js/console.error \"Error updating block:\" %))))\n\n(defn get-prices [callback]\n      (-> (fetch-json (str api-url \"/prices\") {:method \"GET\"})\n          (.then callback)\n          (.catch #(js/console.error \"Error fetching prices:\" %))))\n\n(defn calculate-price [class category weight callback]\n      (-> (fetch-json (str api-url \"/calculate-price\")\n                      {:method \"POST\"\n                       :headers #js {\"Content-Type\" \"application/json\"}\n                       :body (js/JSON.stringify (clj->js {:class class :category category :weight weight}))})\n          (.then callback)\n          (.catch #(js/console.error \"Error calculating price:\" %))))\n\n(defn calculate-revenue-from-to [from to callback]\n      (-> (fetch-json (str api-url \"/revenue-from-to\")\n                      {:method \"POST\"\n                       :headers #js {\"Content-Type\" \"application/json\"}\n                       :body (js/JSON.stringify\n                               #js {:from from\n                                    :to   to})})\n          (.then callback)\n          (.catch #(js/console.error \"Error calculating revenue:\" %))))\n\n\n"]}